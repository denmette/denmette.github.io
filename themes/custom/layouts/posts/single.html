{{ define "main" }}
<article class="space-y-4" aria-labelledby="post-title">
    {{- with .Params.cover.image -}}
      {{- if not $.Params.cover.alt -}}
        {{- errorf "cover.alt is required when cover.image is set for %q" $.File.Path -}}
      {{- end -}}
      {{- $imageAlt := $.Params.cover.alt -}}
      {{- $coverTitle := $.Params.cover.title -}}
      {{- $coverCaption := $.Params.cover.caption -}}
      <figure class="relative overflow-hidden rounded-2xl border border-slate-200 shadow-sm dark:border-slate-800">
        {{ partial "image.html" (dict
                    "page" $
                    "src" .
                    "alt" $imageAlt
                    "class" "w-full object-cover"
                    "sizes" "(max-width: 768px) 100vw, 768px"
                    "loading" "eager"
                    "decoding" "async"
                    "fetchpriority" "high")
          }}
          {{- with $coverCaption -}}
            <figcaption class="absolute inset-x-0 bottom-0 px-4 py-2 text-center text-xs text-slate-100 bg-black/50 backdrop-blur-sm">
                {{ . }}
            </figcaption>
            {{- end -}}
    </figure>{{- end -}}

    <header class="space-y-2">
        <h1 class="text-2xl font-semibold text-slate-900 dark:text-slate-100">{{ .Title }}</h1>
        {{- with .Date -}}
        <p class="text-sm text-slate-500 dark:text-slate-400">
            Gepubliceerd op {{ partial "date.html" (dict "date" . "format" ":date_long") }}{{ if and $.Lastmod (gt (sub $.Lastmod.Unix $.Date.Unix) 86400) }} Â· bijgewerkt {{ partial "date.html" (dict "date" $.Lastmod "format" ":date_long") }}{{ end }}
        </p>
        {{- end -}}
    </header>

    <div class="space-y-4 text-slate-800 dark:text-slate-100">
        <div class="prose prose-slate prose-a:text-moss prose-a:no-underline prose-a:underline-offset-4 hover:prose-a:text-moss hover:prose-a:underline dark:prose-invert dark:prose-a:text-mustard dark:hover:prose-a:text-mustard dark:hover:prose-a:underline">
            {{ .Content }}
        </div>

        {{ partial "post-footer.html" . }}

        {{ partial "comments.html" . }}
    </div>
</article>
{{ end }}
