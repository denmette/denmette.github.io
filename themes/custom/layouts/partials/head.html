<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
{{- $siteTitle := .Site.Title | default "Site" -}}
{{- $pageTitle := .Title | default $siteTitle -}}
{{- $tagline := .Site.Params.tagline | default $siteTitle -}}
{{- $fullTitle := "" -}}
{{- if .IsHome -}}
  {{- $fullTitle = printf "%s · %s" $siteTitle $tagline -}}
{{- else if or (eq .Kind "taxonomy") (eq .Kind "term") -}}
  {{- $termTitle := .Title | default $pageTitle -}}
  {{- if eq .Kind "term" -}}
    {{- $termTitle = .Data.Term | default $termTitle -}}
  {{- end -}}
  {{- $fullTitle = printf "Tag: %s · %s" $termTitle $siteTitle -}}
{{- else -}}
  {{- $fullTitle = printf "%s · %s" $pageTitle $siteTitle -}}
{{- end -}}
{{- $rawDescription := "" -}}
{{- if .IsHome -}}
  {{- $rawDescription = .Site.Params.descriptionLong | default .Site.Params.description -}}
{{- else -}}
  {{- $rawDescription = .Params.description | default .Summary | default .Site.Params.description -}}
{{- end -}}
{{- $description := "" -}}
{{- if $rawDescription -}}
  {{- $description = ($rawDescription | plainify | htmlUnescape | truncate 220) -}}
{{- end -}}
{{- $keywordsValue := "" -}}
{{- $isAboutPage := and .IsPage (eq .Section "over-mij") -}}
{{- if and (or .IsHome $isAboutPage) .Site.Params.keywords -}}
  {{- if reflect.IsSlice .Site.Params.keywords -}}
    {{- $keywordsValue = delimit .Site.Params.keywords ", " -}}
  {{- else -}}
    {{- $keywordsValue = .Site.Params.keywords -}}
  {{- end -}}
{{- end -}}
<title>{{ $fullTitle }}</title>
{{- if $description -}}
<meta name="description" content="{{ $description }}">
{{- end -}}
{{- if $keywordsValue -}}
<meta name="keywords" content="{{ $keywordsValue }}">
{{- end -}}
<link rel="canonical" href="{{ .Permalink }}">
{{ partial "pagefind-meta.html" . }}
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
{{ template "_internal/opengraph.html" . }}
{{ template "_internal/twitter_cards.html" . }}
{{ partial "schema-jsonld.html" . }}

<script>
  (function () {
    function resolveInitialTheme() {
      try {
        var stored = localStorage.getItem("theme");
        if (stored === "light" || stored === "dark") {
          return stored;
        }
      } catch (e) {
        // Ignore storage failures and fall back to media query.
      }
      return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    }

    function applyTheme(next) {
      var isDark = next === "dark";
      var label = isDark ? "Wissel naar lichte modus" : "Wissel naar donkere modus";
      document.documentElement.classList.toggle("dark", isDark);
      return label;
    }

    var initial = resolveInitialTheme();
    var initialLabel = applyTheme(initial);

    function initToggle() {
      var button = document.querySelector("[data-theme-toggle]");
      var labelEl = document.querySelector("[data-theme-label]");
      if (!button) {
        return;
      }
      button.setAttribute("aria-pressed", initial === "dark" ? "true" : "false");
      button.setAttribute("aria-label", initialLabel);
      if (labelEl) {
        labelEl.textContent = initialLabel;
      }
      button.addEventListener("click", function () {
        var next = document.documentElement.classList.contains("dark") ? "light" : "dark";
        var nextLabel = applyTheme(next);
        button.setAttribute("aria-pressed", next === "dark" ? "true" : "false");
        button.setAttribute("aria-label", nextLabel);
        if (labelEl) {
          labelEl.textContent = nextLabel;
        }
        try {
          localStorage.setItem("theme", next);
        } catch (e) {
          // Ignore storage failures.
        }
      });
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initToggle);
    } else {
      initToggle();
    }
  })();
</script>

{{ $css := resources.Get "css/main.css" | css.PostCSS }}
{{ if hugo.IsProduction }}
  {{ $css = $css | minify }}
{{ end }}
{{ $css = $css | fingerprint }}
<link rel="stylesheet" href="{{ $css.RelPermalink }}"{{ with $css.Data.Integrity }} integrity="{{ . }}" crossorigin="anonymous"{{ end }} />
